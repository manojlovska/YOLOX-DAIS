Bootstrap: docker
From: pytorch/pytorch:1.12.1-cuda11.3-cudnn8-runtime

%files
	.

%post
	# Downloads the latest package lists (important).
	apt-get update -y

	# Install python and other tools
	# Non-interactive is used to ensure prompts are omitted.
	apt-get install -y --no-install-recommends \
	python3-dev \
	python3-tk \
	python3-pip \
	python3-setuptools \
	systemd \
	imagemagick \
	curl \
	openslide-tools
	
	apt-get install -y git ffmpeg libsm6 libxext6

	# Reduce image size
	rm -rf /var/lib/apt/lists/*

	# Update pip
	python3 -m pip install --upgrade pip

	# Install python libraries
	python3 -m pip install dvc==3.20.0
	python3 -m pip install dvc-data==2.16.1
	python3 -m pip install dvc-http==2.30.2
	python3 -m pip install dvc-objects==1.0.1
	python3 -m pip install dvc-render==0.6.0
	python3 -m pip install dvc-studio-client==0.15.0
	python3 -m pip install dvc-task==0.3.0
	python3 -m pip install dvclive==2.16.0

	python3 -m pip install loguru==0.7.2
	python3 -m pip install matplotlib==3.7.3

	python3 -m pip install mpmath==1.3.0
	python3 -m pip install ninja==1.11.1

	python3 -m pip install nvidia-cublas-cu11==11.10.3.66
	python3 -m pip install nvidia-cuda-cupti-cu11==11.7.101
	python3 -m pip install nvidia-cuda-nvrtc-cu11==11.7.99
	python3 -m pip install nvidia-cuda-runtime-cu11==11.7.99
	python3 -m pip install nvidia-cudnn-cu11==8.5.0.96
	python3 -m pip install nvidia-cufft-cu11==10.9.0.58
	python3 -m pip install nvidia-curand-cu11==10.2.10.91
	python3 -m pip install nvidia-cusolver-cu11==11.4.0.1
	python3 -m pip install nvidia-cusparse-cu11==11.7.4.91
	python3 -m pip install nvidia-nccl-cu11==2.14.3
	python3 -m pip install nvidia-nvtx-cu11==11.7.91
	python3 -m pip install oauthlib==3.2.2
	python3 -m pip install omegaconf==2.3.0
	python3 -m pip install onnx==1.14.1
	python3 -m pip install onnx-simplifier==0.4.10
	python3 -m pip install opencv-python==4.8.0.76
	python3 -m pip install orjson==3.9.7

	python3 -m pip install Pillow==10.0.0

	python3 -m pip install protobuf==4.24.3
	python3 -m pip install psutil


	python3 -m pip install pycocotools==2.0.7
	python3 -m pip install pycparser==2.21
	python3 -m pip install pydot==1.4.2
	python3 -m pip install pygit2==1.13.0
	python3 -m pip install pytest==7.4.3
	python3 -m pip install rsa==4.9
	python3 -m pip install scipy

	python3 -m pip install tabulate==0.9.0
	python3 -m pip install tensorboard==2.14.0
	python3 -m pip install tensorboard-data-server==0.7.1
	python3 -m pip install torch==2.0.1
	python3 -m pip install torchvision==0.15.2

	python3 -m pip install tqdm==4.66.1
	python3 -m pip install urllib3==1.26.16
	python3 -m pip install wandb==0.15.10

	python3 -m pip install -e .
